<html lang="en">

<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.kustomerapp.com/card-js/latest/kustomer-card.min.js"></script>
    <script>
        function loadContext() {
            // Kustomer.initialize is required for card visibility in the panel.
            Kustomer.initialize(function (contextJSON) {
                console.log(contextJSON)
                var template = $("#mp_template").html();
                $("#panel").html(Mustache.render(template, contextJSON));
                let timerID = setInterval(function () {
                    getTimer()
                }, 5000);
                Kustomer.resize();
            });

        }
        async function getTimer() {
            const res = await fetch('https://worldtimeapi.org/api/timezone/Asia/Dhaka')
            res.json().then(data => {
                $("#timer").text(data.datetime)
            })
        }

    </script>
</head>

<body onload="loadContext()">
    <script id="mp_template" type="text/template">
<div class="container">
    <div class="row">
        <div class="col-sm-4">  
        </div>
        <div class="col-sm-4">  
            <button type="button" class="btn btn-primary">Cancel Order</button>
        </div>
        <div class="col-sm-4">  
            <button type="button" class="btn btn-secondary">Issue Refund</button>
        </div>
      </div>
  <dl class="row">
    <dt class="col-sm-4">
     Order #
    </dt>
        <dd class="col-sm-4">
    {{order.properties.order_id}}
        </dd>
    <dt class="col-sm-4">
        Status
    </dt>
    <dd class="col-sm-4">
      {{order.event}}
    </dd>
    <dt class="col-sm-4">
        Timer
    </dt>
    <dd  id = "timer" class="col-sm-4">
        Will load time here shortly
    </dd>
   
  </dl>
  <dl class="row">
    <dt class="col-sm-4">
        Cart Amount
    </dt>
    <dd class="col-sm-4">
            {{order.properties.cart_amount}}
    </dd>
    <dt class="col-sm-4">
        Currency
    </dt>
    <dd class="col-sm-4">
        {{order.properties.currency}}
    </dd>
    
  </dl>
  <dl class="row">

    <dt class="col-sm-4">
      Products
    </dt>
    <dt class="col-sm-4">
       Qty
    </dt>
    <dt class="col-sm-4">
        Prize
    </dt>
 </dl>
    <!-- <div class="col ">  
        <label class="col-sm-3" for="staticEmail" ></label>
        {{#order.properties.product_name}}
        <label class="col-sm-4" for="staticEmail" >{{.}}</label> </br>
        {{/order.properties.product_name}}
    </div>
    <div class="col">
        <label class="col-sm-3" for="staticEmail" >Qty</label>
        {{#order.properties.product_quantity}}
        <label class="col-sm-4" for="staticEmail" >{{.}}</label></br>
        {{/order.properties.product_quantity}}
    </div>
    <div class="col">
        <label class="col-sm-3" for="staticEmail" ></label>
        {{#order.properties.product_price}}
        <label class="col-sm-4" for="staticEmail" >{{.}}</label></br>
        {{/order.properties.product_price}}
    </div> -->
  
 
</div>
</script>
    <div id="panel">

    </div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.min.js"></script>
</body>

</html>